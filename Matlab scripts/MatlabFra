
%%premetto funziona solo per una lettera per ora bisogna fare un for per ciclarle tutte
%%inoltre ho messo numpage fissato a 18 quindi quello verrà modificato con il controllo che ha fatto fra sul famoso NEXT
clc
clear all

numpage = [1:18]
numpagemax = length(numpage)


%queste 3 non sono sicuro siano da inizializzare, nel caso toglile
colonnanomi = []
colonnalink = []
colonnaid = []

%questo l'ho spezzato così per comodità di lettura
urlpart1='https://itunes.apple.com/us/genre/ios-medical/id6020?mt=8&letter='


%per il ciclo delle lettere ho creato questo
lettere = "ABCDEFGHIJKLMNOPQRSTUWXYZ*"
letterechar = char(lettere)
numlettere = strlength(lettere)


for j=1:numlettere

    for i=1:numpagemax

  html = webread(strcat(urlpart1, letterechar(j),'&page=',num2str(numpage(i), '%d'),'#page'))

  nomi = regexp(html,'?mt=8">(.+?)</a> </li>','tokens')
  colonnanomi = [colonnanomi, nomi']

  link = regexp(html, '(?<=<li><a href=").?+(?=">.)','tokens')
  colonnalink= [colonnalink, link']

  id=regexp(html, '/id(.+?)?mt=8">','tokens')
  colonnaid= [colonnaid, id']

    end
end

Tabella=[colonnanomi,colonnalink,colonnaid]
